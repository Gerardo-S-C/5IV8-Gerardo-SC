<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>Firma con una pagina web</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>
        <header>
            <h1>Integrantes:</h1>
            <br>
            <h1>Cruz Santos Cristian Oziel</h1>
            <h1>Sandoval Calderón Gerardo</h1>
        </header>
        <h1>Subir el .txt para cifrar</h1>
        <form method="post" action="ClavePublica" enctype="multipart/form-data">
            <fieldset>
                <legend>Formulario de subida</legend>
                <input type="file" id="files" name="files" onchange="cargarArchivo(this)" />
                <br><br>
                <legend>Contraseña para el archivo cifrado</legend>
                <input type="password" name="password" >
                <br><br>
                <button type="submit">Subir</button>
            </fieldset>
                <script>
                    function leerArchivo(e) {
                    var archivo = e.target.files[0];
                    if (!archivo) {
                      return;
                    }
                    var lector = new FileReader();
                    lector.onload = function(e) {
                      var contenido = e.target.result;
                      mostrarContenido(contenido);
                    };
                    lector.readAsText(archivo);
                  }
                  function cargarArchivo(e){
                      var file = e.files[0];
                        var objHidden = document.formulario.nombre;
                        objHidden.value = file.name;
                        document.formulario.action = "ClavePublica";
                        document.formulario.submit();
                  }
                  function mostrarContenido(contenido) {
                    var elemento = document.getElementById('contenido-archivo');
                    elemento.innerHTML = contenido;
                  }
                  function enviarTexto(){
                      var texto=document.getElementById("contenido-archivo").value;
                      document.getElementById("contenido-archivo2").value=texto;
                  }
                  document.getElementById('files')
                    .addEventListener('change', leerArchivo, false);
                </script>
                <fieldset>
                    <pre id="contenido-archivo"></pre>
                    <input type="button" id="botonText" onclick="enviarTexto()" value="De clic para leer el archivo">

                        <h3>Contenido del archivo:</h3>
                    <input type="text" id="contenido-archivo2" name="contenido" readonly="readonly">
                </fieldset>    
            <h2>El archivo se cargará con la firma</h2>
        </form>
    </body>
</html>
